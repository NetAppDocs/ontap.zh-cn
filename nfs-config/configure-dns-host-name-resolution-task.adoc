---
permalink: nfs-config/configure-dns-host-name-resolution-task.html 
sidebar: sidebar 
keywords: enabling, dns, host-name, resolution, enable, host, name, resolve, automatic configuration validation 
summary: 您可以使用 vserver services name-service dns 命令在 SVM 上启用 DNS ，并将其配置为使用 DNS 进行主机名解析。主机名可使用外部 DNS 服务器进行解析。 
---
= 启用 DNS 以进行主机名解析
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用 `vserver services name-service dns` 命令在 SVM 上启用 DNS ，并将其配置为使用 DNS 进行主机名解析。主机名可使用外部 DNS 服务器进行解析。

站点范围的 DNS 服务器必须可用于主机名查找。

您应配置多个 DNS 服务器，以避免单点故障。如果您仅输入一个 DNS 服务器名称，则 `vserver services name-service dns create` 命令会发出警告。

网络管理指南 _ 包含有关在 SVM 上配置动态 DNS 的信息。

.步骤
. 在 SVM 上启用 DNS ：
+
`vserver services name-service dns create -vserver _vserver_name_ -domains _domain_name_ -name-servers _ip_addresses _ -state enabled`

+
以下命令将在 SVM vs1 上启用外部 DNS 服务器：

+
[listing]
----
vserver services name-service dns create -vserver vs1.example.com -domains example.com -name-servers 192.0.2.201,192.0.2.202 -state enabled
----
+
[NOTE]
====
从 ONTAP 9.2 开始， `vserver services name-service dns create` 命令会执行自动配置验证，如果 ONTAP 无法联系到名称服务器，则会报告错误消息。

====
. 使用 `vserver services name-service dns show` 命令显示 DNS 域配置。
+
以下命令显示集群中所有 SVM 的 DNS 配置：

+
[listing]
----
vserver services name-service dns show
                                             Name
Vserver           State     Domains             Servers
----------------- --------- ------------------- -------------
cluster1          enabled   example.com         192.0.2.201,
                                                192.0.2.202
vs1.example.com   enabled   example.com         192.0.2.201,
                                                192.0.2.202
----
+
以下命令显示 SVM vs1 的详细 DNS 配置信息：

+
[listing]
----
vserver services name-service dns show -vserver vs1.example.com
               Vserver: vs1.example.com
               Domains: example.com
          Name Servers: 192.0.2.201, 192.0.2.202
    Enable/Disable DNS: enabled
        Timeout (secs): 2
      Maximum Attempts: 1
----
. 使用 `vserver services name-service dns check` 命令验证名称服务器的状态。
+
从 ONTAP 9.2 开始，可以使用 `vserver services name-service dns check` 命令。

+
[listing]
----
vserver services name-service dns check -vserver vs1.example.com

Vserver           Name Server     Status       Status Details
----------------  -------------   ----------   --------------------------
vs1.example.com   10.0.0.50         up         Response time (msec): 2
vs1.example.com   10.0.0.51         up         Response time (msec): 2
----


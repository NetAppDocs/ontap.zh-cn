---
sidebar: sidebar 
permalink: upgrade/task_upgrade_andu_sm.html 
keywords: system manager, netapp, ontap, upgrade, nondisruptive, nondisruptive upgrade, upgrade a cluster, configuration, software image, update, update ONTAP, update software, ndu, resuming, resume, after, error, andu, automated, process 
summary: 您可以使用System Manager无中断升级集群上的ONTAP版本。 
---
= 使用System Manager自动执行无中断ONTAP升级
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
您可以使用System Manager无中断升级集群上的ONTAP版本。

升级过程会检查您的硬件平台和配置、以验证您的系统是否受要升级到的ONTAP版本支持。ONTAP 会在升级期间在集群之间自动切换工作负载，以便您可以继续提供数据。

此操作步骤会将您的系统升级到指定版本的ONTAP。假定目标版本支持您的硬件平台和配置。

从ONTAP 9.10.1开始、如果您的集群包含8个或更多节点、则可以选择一次升级一个HA对。   这样，您就可以根据需要在移至后续 HA 对之前更正第一个 HA 对上的升级问题。

image:workflow_admin_upgrade_ontap.gif["升级任务的工作流图"]


NOTE: 如果在自动升级期间遇到问题，您可以在 System Manager 中查看 EMS 消息和详细信息：单击 * 事件和作业 * > * 事件 * 。

.步骤
. 如果要将软件映像下载到网络上的 HTTP 或 FTP 服务器，请将软件映像从 NetApp 支持站点复制到 HTTP 或 FTP 服务器上要提供此映像的目录。
+
如果要将软件映像下载到本地文件夹，请单击 NetApp 支持站点上的软件映像，选择 *另存为*，然后选择本地文件夹以放置此映像。

. 根据您运行的 ONTAP 版本，执行以下步骤之一：
+
|===


| ONTAP 版本 | 步骤 


| ONTAP 9.8或更高版本  a| 
单击 * 集群 > 概述 * 。



| ONTAP 9.5 ， 9.6 和 9.7  a| 
单击 * 配置 * > * 集群 * > * 更新 * 。



| ONTAP 9.4 或更早版本  a| 
单击 * 配置 * > * 集群更新 * 。

|===
. 在概述窗格的右角，单击 image:icon_kabob.gif["菜单图标"]。
. 单击 * ONTAP Update* 。
. 在集群更新选项卡中，添加新映像或选择可用映像。
+
|===


| 如果您要 ... | 那么 ... 


 a| 
从本地客户端添加新软件映像

* 注： * 您应已将映像下载到本地客户端。

link:download-software-image.html["下载ONTAP软件映像"]
 a| 
.. 在 Available Software images 下，单击 * 从本地添加 * 。
.. 浏览到保存软件映像的位置，选择该映像，然后单击 * 打开 * 。
+
单击 * 打开 * 后，软件映像将上传。





 a| 
从 NetApp 支持站点添加新的软件映像
 a| 
.. 单击 * 从服务器添加 * 。
.. 在添加新软件映像对话框中，输入用于保存从 NetApp 支持站点下载的映像的 HTTP 服务器或 FTP 服务器的 URL。
+
对于匿名 FTP ，必须在中指定 URL ftp://anonymous@ftpserver[] 格式。

.. 单击 * 添加 * 。




 a| 
选择一个可用映像
 a| 
从列出的映像中选择一个。

|===
. 单击*验证*运行升级前验证检查、以验证集群是否已做好升级准备。
+
此验证操作会检查集群组件以验证是否可以无中断地完成升级、然后会显示任何错误或警告。此外，它还会显示在更新软件之前必须执行的任何必要补救措施。

+

IMPORTANT: 在继续升级之前、您必须针对这些错误执行所有必要的补救措施。尽管您可以忽略警告的补救措施、但最佳实践是在继续升级之前执行所有补救措施。

. 单击 * 下一步 * 。
. 单击 * 更新 * 。
+
此时将再次执行验证。

+
** 验证完成后，一个表将显示任何错误和警告，以及继续操作前需要采取的任何补救措施。
** 如果验证已完成但出现警告，则可以选择 * 更新但出现警告 * 。
+

NOTE: 如果您希望节点一次升级一个HA对、而不是批量升级集群中的所有HA对、请选择*一次更新一个HA对*。只有包含八个或更多节点的集群才能在 ONTAP 9.10.1 或更高版本中使用此选项。





验证完成且升级正在进行中后、升级可能会因错误而暂停。您可以单击此错误消息以查看详细信息、然后在恢复升级之前执行补救措施。

对于除双节点 MetroCluster 系统之外的任何 MetroCluster 配置，在用户启动并在命令行上提供确认之后， ONTAP 升级过程会在两个站点（本地站点和灾难恢复站点）的 HA 对上同时启动。对于双节点MetroCluster系统、首先在灾难恢复站点(即未启动升级的站点)上启动升级。在灾难恢复站点上完全完成升级后、将在本地站点上开始升级。

成功完成升级后、节点将重新启动、您将重定向到System Manager登录页面。如果节点重新启动需要很长时间，则必须刷新浏览器。



== 视频：轻松升级

了解 ONTAP 9.8 中 System Manager 简化的 ONTAP 升级功能。

video::xwwX8vrrmIk[youtube,width=848,height=480]
---
permalink: consistency-groups/modify-task.html 
sidebar: sidebar 
keywords: consistency groups, shrink, expand, add volumes, remove volumes, move volumes, smbc 
summary: 您可以通过添加或删除卷或在子一致性组之间移动卷来修改一致性组。 
---
= 修改一致性组
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
从ONTAP 9.12.1开始、您可以通过删除卷或添加现有卷(扩展一致性组)来修改一致性组。从ONTAP 9.13.1开始、如果子一致性组共享一个通用父卷、则可以在这些子一致性组之间移动卷。



== 将卷添加到一致性组

从ONTAP 9.12.1开始、您可以无系统地向一致性组添加卷。

.开始之前
* 您不能添加与其他一致性组关联的卷。
* 一致性组支持NAS、SAN和NVMe协议。
* 如果调整量在整体范围内、则一次最多可以向一致性组添加16个卷 xref:limits.html[一致性组限制]。
* 从ONTAP 9.13.1开始、您可以使用活动的SnapMirror业务连续性(SM-BC)或异步SnapMirror保护策略无故障地将卷添加到一致性组。
* 将卷添加到受SM-BC保护的一致性组时、SM-BC关系状态将更改为"正在扩展"、直到为新卷配置镜像和保护为止。如果在此过程完成之前主集群上发生灾难、则在故障转移操作期间、一致性组将还原到其原始组成。
* 在ONTAP 9.12.1中、您无法向SM-BC关系中的一致性组添加卷。您必须先中断SM-BC关系、修改一致性组、然后使用SM-BC还原保护。
* 从ONTAP 9.12.1开始、ONTAP REST API支持向一致性组添加_new_或现有卷。有关ONTAP REST API的详细信息、请参见 link:https://docs.netapp.com/us-en/ontap-automation/reference/api_reference.html#access-a-copy-of-the-ontap-rest-api-reference-documentation["ONTAP REST API参考文档"^]。
+
从ONTAP 9.13.1开始、System Manager支持此功能。

* 扩展一致性组时、修改之前捕获的一致性组的Snapshot副本将视为部分副本。基于该Snapshot副本的任何还原操作都将反映快照时间点的一致性组。
* 如果使用的是ONTAP 9.10.1到9.11.1、则无法修改一致性组。要在ONTAP 9.10.1或9.11.1中更改一致性组的配置、必须删除此一致性组、然后使用要包含的卷创建一个新的一致性组。


.步骤
. 选择 * 存储 > 一致性组 * 。
. 选择要修改的一致性组。
. 如果要修改单个一致性组、请在*卷*菜单顶部选择*更多*、然后选择*扩展*以添加卷。
+
如果要修改子一致性组、请确定要修改的父一致性组。选择*>*按钮以查看子一致性组、然后选择 image:../media/icon_kabob.gif["三个垂直堆积点"] 要修改的子一致性组名称旁边。从该菜单中选择*展开*。

. 最多选择16个要添加到一致性组的卷。
. 选择 * 保存 * 。操作完成后、在一致性组的*卷*菜单中查看新添加的卷。




== 从一致性组中删除卷

从一致性组中删除的卷不会被删除。它们在集群中保持活动状态。

.开始之前
* 您不能从SnapMirror业务连续性(SM-BC)关系中的一致性组中删除卷。您必须先中断SM-BC关系以修改一致性组、然后再重新建立此关系。
* 如果在执行删除操作后某个一致性组中没有卷、则此一致性组将被删除。
* 从一致性组中删除卷后、该一致性组的现有Snapshot将保留、但会被视为无效。现有Snapshot不能用于还原一致性组的内容。卷粒度快照仍然有效。
* 如果从集群中删除某个卷、则该卷将自动从一致性组中删除。
* 要在ONTAP 9.10.1或9.11.1中更改一致性组的配置、必须先删除此一致性组、然后使用所需的成员卷创建新的一致性组。
* 从集群中删除卷将自动将其删除一致性组。


.步骤
. 选择 * 存储 > 一致性组 * 。
. 选择要修改的单个或子一致性组。
. 在*卷*菜单中、选中要从一致性组中删除的各个卷旁边的复选框。
. 选择*从一致性组中删除卷*。
. 确认您已了解删除卷将使一致性组的所有Snapshot副本发生原因 变为无效、然后选择*删除*。




== 在一致性组之间移动卷

从ONTAP 9.13.1开始、您可以在共享父级的子一致性组之间移动卷。

.开始之前
* 您只能在嵌套在同一父一致性组下的一致性组之间移动卷。
* 现有一致性组快照无效、无法再作为一致性组快照进行访问。单个卷快照仍然有效。
* 父一致性组的Snapshot副本仍然有效。
* 如果将所有卷移出子一致性组、则该一致性组将被删除。
* 对一致性组的修改必须遵守 xref:limits.html[一致性组限制]。


.步骤
. 选择 * 存储 > 一致性组 * 。
. 选择包含要移动的卷的父一致性组。找到子一致性组，然后展开“**卷**”菜单。选择要移动的卷。
. 选择**移动**。
. 选择要将卷移动到新一致性组还是现有组。
+
.. 要移至现有一致性组、请选择**现有子一致性组**、然后从下拉菜单中选择一致性组的名称。
.. 要移至新一致性组，请选择**新建子一致性组**。输入新子一致性组的名称、然后选择组件类型。


. 选择**移动**。


.相关信息
* xref:limits.html[一致性组限制]
* xref:clone-task.html[克隆一致性组]


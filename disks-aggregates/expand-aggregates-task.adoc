---
permalink: disks-aggregates/expand-aggregates-task.html 
sidebar: sidebar 
keywords: expand, aggregate 
summary: 您可以将磁盘添加到聚合，以便它可以为其关联卷提供更多存储。用于向聚合添加分区磁盘的操作步骤与用于添加未分区磁盘的操作步骤类似。 
---
= 展开聚合
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以将磁盘添加到聚合，以便它可以为其关联卷提供更多存储。用于向聚合添加分区磁盘的操作步骤与用于添加未分区磁盘的操作步骤类似。

您必须了解要添加存储的聚合的 RAID 组大小。

扩展聚合时，您应了解是向聚合添加分区磁盘还是未分区磁盘。向现有聚合添加未分区驱动器时，现有 RAID 组的大小将由新 RAID 组继承，这可能会影响所需的奇偶校验磁盘数量。如果将未分区磁盘添加到由分区磁盘组成的 RAID 组中，则新磁盘将进行分区，从而留下一个未使用的备用分区。

配置分区时，您必须确保节点中没有同时包含两个分区的驱动器作为备用驱动器。否则，如果节点发生控制器中断，则可能无法向技术支持提供有关此问题的宝贵信息（核心文件）。

[NOTE]
====
请勿使用 `disklist` 命令扩展聚合。这可能会导致发生原因分区错位。

====
.步骤
. 显示拥有聚合的系统上的可用备用存储：
+
`storage aggregate show-spare-disks -original-owner _node_name_`

+
您可以使用 ` -is-disk-shared` 参数仅显示已分区的驱动器或仅显示未分区的驱动器。

+
[listing]
----
cl1-s2::> storage aggregate show-spare-disks -original-owner cl1-s2 -is-disk-shared true

Original Owner: cl1-s2
 Pool0
  Shared HDD Spares
                                                            Local    Local
                                                             Data     Root Physical
 Disk                        Type     RPM Checksum         Usable   Usable     Size Status
 --------------------------- ----- ------ -------------- -------- -------- -------- --------
 1.0.1                       BSAS    7200 block           753.8GB  73.89GB  828.0GB zeroed
 1.0.2                       BSAS    7200 block           753.8GB       0B  828.0GB zeroed
 1.0.3                       BSAS    7200 block           753.8GB       0B  828.0GB zeroed
 1.0.4                       BSAS    7200 block           753.8GB       0B  828.0GB zeroed
 1.0.8                       BSAS    7200 block           753.8GB       0B  828.0GB zeroed
 1.0.9                       BSAS    7200 block           753.8GB       0B  828.0GB zeroed
 1.0.10                      BSAS    7200 block                0B  73.89GB  828.0GB zeroed
2 entries were displayed.
----
. 显示聚合的当前 RAID 组：
+
`storage aggregate show-status _aggr_name_`

+
[listing]
----
cl1-s2::> storage aggregate show-status -aggregate data_1

Owner Node: cl1-s2
 Aggregate: data_1 (online, raid_dp) (block checksums)
  Plex: /data_1/plex0 (online, normal, active, pool0)
   RAID Group /data_1/plex0/rg0 (normal, block checksums)
                                                              Usable Physical
     Position Disk                        Pool Type     RPM     Size     Size Status
     -------- --------------------------- ---- ----- ------ -------- -------- ----------
     shared   1.0.10                       0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.5                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.6                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.11                       0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.0                        0   BSAS    7200  753.8GB  828.0GB (normal)
5 entries were displayed.
----
. 模拟向聚合添加存储：
+
`storage aggregate add-disks -aggregate _aggr_name_ -diskcount _number_of_disks_or_partitions_ -simulate true`

+
您可以在不实际配置任何存储的情况下查看添加存储的结果。如果模拟命令显示任何警告，您可以调整命令并重复模拟。

+
[listing]
----
cl1-s2::> storage aggregate add-disks data_1 -diskcount 5 -simulate true

Addition of disks would succeed for aggregate "data_1" on node "cl1-s2". The
following disks would be used to add to the aggregate: 1.0.2, 1.0.3, 1.0.4, 1.0.8, 1.0.9.
----
. 将存储添加到聚合：
+
`storage aggregate add-disks -aggregate _aggr_name_ -raidgroup new -diskcount _number_of_disks_or_partitions_`

+
创建 Flash Pool 聚合时，如果要使用与聚合不同的校验和添加磁盘，或者要向混合校验和聚合添加磁盘，则必须使用 ` -checksumstyle` 参数。

+
如果要向 Flash Pool 聚合添加磁盘，则必须使用 ` -disktype` 参数指定磁盘类型。

+
您可以使用 ` -disksize` 参数指定要添加的磁盘的大小。仅会选择大小约为指定大小的磁盘以添加到聚合中。

+
[listing]
----
cl1-s2::> storage aggregate add-disks -aggregate data_1 -raidgroup new -diskcount 5
----
. 验证是否已成功添加存储：
+
`storage aggregate show-status -aggregate _aggr_name_`

+
[listing]
----
cl1-s2::> storage aggregate show-status -aggregate data_1

Owner Node: cl1-s2
 Aggregate: data_1 (online, raid_dp) (block checksums)
  Plex: /data_1/plex0 (online, normal, active, pool0)
   RAID Group /data_1/plex0/rg0 (normal, block checksums)
                                                              Usable Physical
     Position Disk                        Pool Type     RPM     Size     Size Status
     -------- --------------------------- ---- ----- ------ -------- -------- ----------
     shared   1.0.10                       0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.5                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.6                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.11                       0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.0                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.2                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.3                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.4                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.8                        0   BSAS    7200  753.8GB  828.0GB (normal)
     shared   1.0.9                        0   BSAS    7200  753.8GB  828.0GB (normal)
10 entries were displayed.
----
. 验证节点是否仍至少有一个驱动器，其中根分区和数据分区均为备用驱动器：
+
`storage aggregate show-spare-disks -original-owner _node_name_`

+
[listing]
----
cl1-s2::> storage aggregate show-spare-disks -original-owner cl1-s2 -is-disk-shared true

Original Owner: cl1-s2
 Pool0
  Shared HDD Spares
                                                            Local    Local
                                                             Data     Root Physical
 Disk                        Type     RPM Checksum         Usable   Usable     Size Status
 --------------------------- ----- ------ -------------- -------- -------- -------- --------
 1.0.1                       BSAS    7200 block           753.8GB  73.89GB  828.0GB zeroed
 1.0.10                      BSAS    7200 block                0B  73.89GB  828.0GB zeroed
2 entries were displayed.
----


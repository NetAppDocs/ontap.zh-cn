---
permalink: s3-config/ontap-s3-supported-actions-reference.html 
sidebar: sidebar 
keywords: ontap s3, supported, actions 
summary: ONTAP S3 支持的操作。 
---
= ONTAP S3 支持的操作
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
标准S3 REST API支持ONTAP S3操作、但如下所示除外。有关详细信息，请参见 link:https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html["Amazon S3 API参考"^]。


NOTE: 在ONTAP中使用本机S3分段时、尤其支持这些S3操作。使用时不支持其中某些操作，例如与版本控制、对象锁定和其他功能关联的操作link:../s3-multiprotocol/index.html["S3 NAS分段(多协议NAS卷中的S3)"]。

除非针对特定操作另有说明，否则从ONTAP 9.8 开始支持以下常见请求标头：

* `Authorization`
* `Connection`
* `Content-Length`
* `Content-MD5`
* `Content-Type`
* `Date`
* `Expect`
* `Host`
* `x-amz-date`




== 存储分段操作

ONTAP支持使用AWS S3 API执行以下操作：

|===
| 存储分段操作 | ONTAP 支持、从开始 


 a| 
CreateBucket

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `x-amz-bucket-object-lock-enabled`

| ONTAP 9.11.1 


 a| 
DeleteBucket

ONTAP S3 支持此请求的所有常用参数和标头。
| ONTAP 9.11.1 


| DeleteBucketCors ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


| DeleteBucketLifecycle ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


 a| 
DeleteBucketPolicy

ONTAP S3 支持此请求的所有常用参数和标头。
| ONTAP 9.12.1 


| GetBucketAcl ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


| GetBucketCors ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


 a| 
GetBucketLifecycleConfiguration

ONTAP S3 支持此请求的所有常用参数和标头。
 a| 
ONTAP 9.13.1

*仅支持到期操作



| GetBucketLocation ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.10.1 


| GetBucketPolicy ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.12.1 


| GetBucketVersioning ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.11.1 


| HeadBucket ONTAP S3 支持此请求的所有常见参数和标头。 | ONTAP 9.8 


| ListAllMyBuckets ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


| ListBuckets ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


| ListBucketVersions ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.11.1 


| PutBucket  a| 
* ONTAP 9.11.1
* ONTAP 9.8-仅支持ONTAP REST API




| PutBucketCors ONTAP S3 支持此请求的所有常用参数和标头。  a| 
ONTAP 9.8



| PutBucketLifecycleConfiguration ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.13.1 * 仅支持过期操作 


| PutBucketPolicy ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.12.1 


| PutBucketVersioning ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.11.1 
|===


== 对象操作

从 ONTAP 9.1.1 开始， ONTAP S3 支持对象元数据和标记。

* PutObject和CreateMultipartUpload使用包括键值对 `x-amz-meta-<key>.`
+
例如： `x-amz-meta-project: ontap_s3`。

* GetObject和HeadObject返回用户定义的元数据。
* 与元数据不同，可以使用以下命令独立于对象读取标记：
+
** PutObjectTagging
** GetObjectTagging
** DeleteObjectTagging




从ONTAP 9.11.1开始、ONTAP S3支持使用以下ONTAP API进行对象版本控制和关联操作：

* GetBucketVersioning
* ListBucketVersions
* PutBucketVersioning


除非针对特定操作另有说明，否则支持以下 URI 查询参数：

* `versionId`（根据ONTAP 9.12.1 开始的对象操作要求）


|===
| 对象操作 | ONTAP 支持、从开始 


 a| 
AbortMultipartUpload

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 查询参数：
`uploadId`
 a| 
ONTAP 9.8



 a| 
CompleteMultipartUpload

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 查询参数：
`uploadId`
 a| 
ONTAP 9.8



 a| 
CopyObject

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-metadata-directive`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-tagging`
* `x-amz-tagging-directive`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.12.1 


 a| 
CreateMultipartUpload

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


 a| 
DeleteObject

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `x-amz-bypass-governance-retention`

| ONTAP 9.8 


| DeleteObjects ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：* `x-amz-bypass-governance-retention` | ONTAP 9.11.1 


 a| 
DeleteObjectTagging

ONTAP S3 支持此请求的所有常用参数和标头。
| ONTAP 9.9.1 


 a| 
GetObject

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 查询参数：

* `partNumber`
* `response-cache-control`
* `response-content-disposition`
* `response-content-encoding`
* `response-content-language`
* `response-content-type`
* `response-expires`


还有这个附加的请求标头：

* 范围

| ONTAP 9.8 


| GetObjectAcl ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


 a| 
获取对象属性

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `x-amz-object-attributes`

| ONTAP 9.17.1 


| GetObjectRetention ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.14.1 


| GetObjectTagging ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.9.1 


| HeadObject ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.8 


 a| 
ListMultipartUpload

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `delimiter`
* `key-marker`
* `max-uploads`
* `prefix`
* `upload-id-marker`

| ONTAP 9.8 


 a| 
ListObjects

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `delimiter`
* `encoding-type`
* `marker`
* `max-keys`
* `prefix`

| ONTAP 9.8 


 a| 
List对象V2

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `continuation-token`
* `delimiter`
* `encoding-type`
* `fetch-owner`
* `max-keys`
* `prefix`
* `start-after`

| ONTAP 9.8 


 a| 
ListObjectVersies

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `delimiter`
* `encoding-type`
* `key-marker`
* `max-keys`
* `prefix`
* `version-id-marker`

| ONTAP 9.11.1 


 a| 
ListParts

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `max-parts`
* `part-number-marker`
* `uploadId`

| ONTAP 9.8 


 a| 
PutObject

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `Cache-Control`
* `Content-Disposition`
* `Content-Encoding`
* `Content-Language`
* `Expires`
* `x-amz-tagging`
* `x-amz-object-lock-mode`
* `x-amz-object-lock-retain-until-date`
* `x-amz-meta-<metadata-name>`

| ONTAP 9.8 


| PutObjectLockConfiguration ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.14.1 


 a| 
PutObject保留

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加标头：

* `x-amz-bypass-governance-retention`

| ONTAP 9.14.1 


| PutObjectTagging ONTAP S3 支持此请求的所有常用参数和标头。 | ONTAP 9.9.1 


| 上传部件 | ONTAP 9.8 


 a| 
上传PartCopy

ONTAP S3 支持此请求的所有常用参数和标头，以及以下附加 URI 参数：

* `partNumber`
* `uploadId`


以及这些额外的请求标头：

* `x-amz-copy-source`
* `x-amz-copy-source-if-match`
* `x-amz-copy-source-if-modified-since`
* `x-amz-copy-source-if-none-match`
* `x-amz-copy-source-if-unmodified-since`
* `x-amz-copy-source-range`

| ONTAP 9.12.1 
|===


== 组策略

这些操作并不特定于 S3 ，通常与身份和管理（ IAM ）流程相关。ONTAP 支持这些命令，但不使用 IAM REST API 。

* 创建策略
* AttachGroup 策略




== 用户管理

这些操作并不特定于 S3 ，通常与 IAM 流程相关。

* CreateUser
* deleteuser
* CreateGroup
* DeleteGroup




== S3操作(按版本)

.ONTAP 9.14.1
S3.14.1增加了对ONTAP 9对象锁定的支持。


NOTE: 不支持合法保留操作(没有定义保留时间的锁定)。

* GetObjectLockConfiguration
* GetObject保留
* PutObjectLockConfiguration
* PutObject保留


.ONTAP 9.13.1
ONTAP 9．1增加了对存储分段生命周期管理的支持。

* DeleteBucketLifecycleConfiguration
* GetBucketLifecycleConfiguration
* PutBucketLifecycleConfiguration


.ONTAP 9.12.1
ONTAP 9 12.1增加了对分段策略的支持以及复制对象的功能。

* DeleteBucketPolicy
* GetBucketPolicy
* PutBucketPolicy
* CopyObject
* 上传PartCopy


.ONTAP 9.11.1
API.11.1增加了对版本控制、预先签名的、分块上传以及使用S3 ONTAP 9创建和删除存储分段等常见S3操作的支持。

* ONTAP S3 现在支持使用以下方式对分块上传签名请求进行支持 `x-amz-content-sha256:
STREAMING-AWS4-HMAC-SHA256-PAYLOAD`
* 现在、ONTAP S3支持使用预先签名的URL的客户端应用程序共享对象、或者允许其他用户上传对象而无需用户凭据。
* CreateBucket
* DeleteBucket
* GetBucketVersioning
* ListBucketVersions
* PutBucket
* PutBucketVersioning
* DeleteObjects
* ListObjectVersies



NOTE: 由于在创建第一个分段之前不会创建底层FlexGroup、因此、必须先在ONTAP中创建分段、然后外部客户端才能使用CreateBucket.

.ONTAP 9.10.1
GetBucket10.1增加了对SnapMirror S3和ONTAP 9的支持。

* GetBucketLocation


.ONTAP 9.9.1
ONTAP 9 S3.9.1为ONTAP S3增加了对对象元数据和标记支持的支持。

* 现在，PutObject和CreateMultipartUpload使用包括键值对 `x-amz-meta-<key>`。例如： `x-amz-meta-project: ontap_s3`。
* 现在、GetObject和HeadObject将返回用户定义的元数据。


标记也可与存储分段一起使用。与元数据不同，可以使用以下命令独立于对象读取标记：

* PutObjectTagging
* GetObjectTagging
* DeleteObjectTagging


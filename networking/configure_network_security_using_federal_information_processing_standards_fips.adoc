---
sidebar: sidebar 
permalink: networking/configure_network_security_using_federal_information_processing_standards_fips.html 
keywords: fips 140-2, compliant, ssl, connections, tlsv1.2, tlsv1.1, tlsv1, enable fips, disable fips, compliance status, SSL 
summary: 所有 SSL 连接均符合联邦信息处理标准（ FIPS ） 140-2 
---
= 使用FIPS为所有ONTAP连接配置SSL网络安全性
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAP 的所有 SSL 连接均符合联邦信息处理标准 (FIPS) 140-2。您可以打开和关闭 SSL FIPS 模式，全局设置 SSL 协议，并关闭ONTAP中的任何弱密码。

默认情况下、ONTAP上的SSL设置为禁用FIPS合规并启用以下TLS协议：

* TLSv1.3 (从ONTAP 9.11.1开始)
* TLSv1.2


默认情况下、先前版本的ONTAP启用了以下TLS协议：

* TLSv1.1 (从ONTAP 9.12.1开始、默认情况下处于禁用状态)
* TLSv1 (从ONTAP 9.8开始、默认情况下处于禁用状态)


启用 SSL FIPS 模式后，从 ONTAP 到外部客户端或 ONTAP 外部服务器组件的 SSL 通信将使用 FIPS 兼容的 SSL 加密。

如果您希望管理员帐户使用 SSH 公有密钥访问 SVM ，则在启用 SSL FIPS 模式之前，必须确保主机密钥算法受支持。

*注：* ONTAP 9.11.1及更高版本对主机密钥算法的支持已发生更改。

[cols="30,30,30"]
|===


| ONTAP 版本 | 支持的密钥类型 | 不支持的密钥类型 


 a| 
9.11.1及更高版本
 a| 
ECDSA-SHA2-nistp256
 a| 
RSA-SHA2-512 +
RSA-SHA2-256 +
SSS-ed25519及更高
SSS-DSS +
SSS-RSA



 a| 
9.10.1及更早版本
 a| 
ECDSA-SHA2-nistp256 +
SSS-ed25519
 a| 
SSS-DSS +
SSS-RSA

|===
在启用 FIPS 之前，必须使用支持的密钥类型重新配置不具有受支持密钥算法的现有 SSH 公有密钥帐户，否则管理员身份验证将失败。

有关详细信息，请参见 link:../authentication/enable-ssh-public-key-accounts-task.html["启用 SSH 公有密钥帐户"]。

ONTAP 9.18.1 引入了对 ML-KEM、ML-DSA 和 SLH-DSA 后量子计算加密算法的支持，用于 SSL，从而为抵御未来潜在的量子计算机攻击提供了额外的安全保障。这些算法仅在以下情况下可用<<禁用 FIPS,FIPS 已禁用>>。当 FIPS 被禁用且对等方支持时，将协商后量子加密算法。



== 启用 FIPS

建议所有安全用户在系统安装或升级后立即调整其安全配置。启用 SSL FIPS 模式后，从 ONTAP 到外部客户端或 ONTAP 外部服务器组件的 SSL 通信将使用 FIPS 兼容的 SSL 加密。


NOTE: 启用FIPS后、您不能安装或创建RSA密钥长度为4096的证书。

.步骤
. 更改为高级权限级别：
+
`set -privilege advanced`

. 启用FIPS：
+
`security config modify -is-fips-enabled true`

. 当系统提示您继续时、输入 `y`
. 从ONTAP 9.9.1 开始，不需要重新启动。如果您运行的是ONTAP 9.8 或更早版本，请手动逐个重新启动集群中的每个节点。


.示例
如果您运行的是 ONTAP 9.9.1 或更高版本，则不会看到警告消息。

....
security config modify -is-fips-enabled true

Warning: This command will enable FIPS compliance and can potentially cause some non-compliant components to fail. MetroCluster and Vserver DR require FIPS to be enabled on both sites in order to be compatible.
Do you want to continue? {y|n}: y

Warning: When this command completes, reboot all nodes in the cluster. This is necessary to prevent components from failing due to an inconsistent security configuration state in the cluster. To avoid a service outage, reboot one node at a time and wait for it to completely initialize before rebooting the next node. Run "security config status show" command to monitor the reboot status.
Do you want to continue? {y|n}: y
....
有关和SSL FIPS模式配置的详细信息 `security config modify`，请参见link:https://docs.netapp.com/us-en/ontap-cli/security-config-modify.html["ONTAP 命令参考"^]。



== 禁用 FIPS

从ONTAP 9.18.1 开始， ONTAP中的 SSL 支持 ML-KEM、ML-DSA 和 SLH-DSA 后量子计算加密算法。只有在禁用 FIPS 且对等方支持这些算法时，这些算法才可用。

.步骤
. 更改为高级权限级别：
+
`set -privilege advanced`

. 通过键入以下命令禁用 FIPS ：
+
`security config modify -is-fips-enabled false`

. 当系统提示您继续时、输入 `y`。
. 从ONTAP 9.9.1 开始，不需要重新启动。如果您运行的是ONTAP 9.8 或更早版本，请手动重新启动集群中的每个节点。


如果您需要使用 SSLv3 协议，则必须按照上述步骤禁用 FIPS。只有在禁用 FIPS 的情况下才能启用 SSLv3。

您可以使用以下命令启用 SSLv3。如果您运行的是ONTAP 9.9.1 或更高版本，则不会看到此警告消息。

....
security config modify -supported-protocols SSLv3

Warning: Enabling the SSLv3 protocol may reduce the security of the interface, and is not recommended.
Do you want to continue? {y|n}: y

Warning: When this command completes, reboot all nodes in the cluster. This is necessary to prevent components from failing due to an inconsistent security configuration state in the cluster. To avoid a service outage, reboot one node at a time and wait for it to completely initialize before rebooting the next node. Run "security config status show" command to monitor the reboot status.
Do you want to continue? {y|n}: y
....


== 查看 FIPS 合规状态

您可以查看整个集群是否正在运行当前安全配置设置。

.步骤
. 如果您运行的是ONTAP 9.8 或更早版本，请手动逐个重新启动集群中的每个节点。
. 查看当前合规状态：
+
`security config show`

+
....
cluster1::> security config show
Cluster    Supported
FIPS Mode  Protocols Supported Cipher Suites
---------- --------- ----------------------------------------------------------
false      TLSv1.3,  TLS_RSA_WITH_AES_128_CCM, TLS_RSA_WITH_AES_128_CCM_8,
           TLSv1.2   TLS_RSA_WITH_AES_128_GCM_SHA256,
                     TLS_RSA_WITH_AES_128_CBC_SHA,
                     TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_256_CCM,
                     TLS_RSA_WITH_AES_256_CCM_8,
                     ...
....
+
有关的详细信息 `security config show`，请参见link:https://docs.netapp.com/us-en/ontap-cli/security-config-show.html["ONTAP 命令参考"^]。



.相关信息
* link:https://csrc.nist.gov/pubs/fips/203/final["FIPS 203：基于模块格的密钥封装机制标准（ML-KEM）"^]
* link:https://csrc.nist.gov/pubs/fips/204/final["FIPS 204：基于模块格的数字签名标准（ML-DSA）"^]
* link:https://csrc.nist.gov/pubs/fips/205/final["FIPS 205：无状态哈希数字签名标准 (SLH-DSA)"^]


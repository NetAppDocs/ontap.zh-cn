---
permalink: nfs-admin/nfsv3-nfsv4-performance-tcp-transfer-size-concept.html 
sidebar: sidebar 
keywords: nfsv3, nfsv4, performance, improvement, modify, tcp, transfer, size 
summary: 您可以通过修改 TCP 最大传输大小来提高通过高延迟网络连接到存储系统的 NFSv3 和 NFSv4 客户端的性能。 
---
= 通过修改 TCP 传输大小来提高 NFSv3 和 NFSv4 的性能
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以通过修改 TCP 最大传输大小来提高通过高延迟网络连接到存储系统的 NFSv3 和 NFSv4 客户端的性能。

当客户端通过广域网（ WAN ）或城域网（ man ）等高延迟网络访问存储系统时，如果延迟超过 10 毫秒，则可以通过修改 TCP 最大传输大小来提高连接性能。在低延迟网络（例如局域网（ LAN ））中访问存储系统的客户端，对这些参数的修改几乎没有好处。如果吞吐量提高不会超过延迟影响，则不应使用这些参数。

要确定您的存储环境是否会因修改这些参数而受益，您应首先对性能较差的 NFS 客户端进行全面的性能评估。查看此低性能是否是由于往返延迟过长以及客户端上的请求较小所致。在这种情况下，客户端和服务器无法充分利用可用带宽，因为它们会花费大部分工作周期来等待通过连接传输的小请求和响应。

通过增加 NFSv3 和 NFSv4 请求大小，客户端和服务器可以更有效地使用可用带宽，以便在每个单元时间移动更多数据，从而提高连接的整体效率。

请注意，存储系统和客户端之间的配置可能会有所不同。存储系统和客户端支持传输操作的最大大小为 1 MB 。但是，如果将存储系统配置为支持 1 MB 最大传输大小，但客户端仅支持 64 KB ，则挂载传输大小将限制为 64 KB 或更少。

在修改这些参数之前，您必须了解，在组装和传输大型响应所需的时间段内，它会导致存储系统占用更多内存。存储系统的高延迟连接越多，额外的内存消耗就越多。具有高内存容量的存储系统可能不会受到此更改的影响。内存容量较低的存储系统的性能可能会明显下降。

要成功使用这些参数，需要能够从集群的多个节点检索数据。集群网络固有的延迟可能会增加响应的整体延迟。使用这些参数时，整体延迟往往会增加。因此，延迟敏感型工作负载可能会产生负面影响。
